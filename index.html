<!DOCTYPE html>
<html>
<head>
  <style>
    #canvas {
      position: relative;
      width: 100%;
      height: 100vh;
    }

    .pixel {
      width: 1px;
      height: 1px;
      position: absolute;
    }
  </style>
  <script>
    var canvasWidth;
    var canvasHeight;
    var pixels = [];

    function createPixel() {
      var pixel = document.createElement("div");
      pixel.className = "pixel";
      pixel.style.backgroundColor = getRandomColor();
      document.getElementById("canvas").appendChild(pixel);
      pixels.push(pixel); // Store the pixel in the array
      return pixel;
    }

    function movePixel(pixel) {
      var left = parseInt(pixel.style.left) || 0;
      var top = parseInt(pixel.style.top) || 0;
      var previousColor = pixel.style.backgroundColor;

      // Randomly change the pixel's color
      pixel.style.backgroundColor = getRandomColor();

      // Generate a random direction
      var direction = Math.floor(Math.random() * 4);
      switch (direction) {
        case 0: // Move left
          left = (left - 1 + canvasWidth) % canvasWidth;
          break;
        case 1: // Move right
          left = (left + 1) % canvasWidth;
          break;
        case 2: // Move up
          top = (top - 1 + canvasHeight) % canvasHeight;
          break;
        case 3: // Move down
          top = (top + 1) % canvasHeight;
          break;
      }

      // Check if the pixel was on this position before
      for (var i = 0; i < pixels.length; i++) {
        var p = pixels[i];
        if (p !== pixel && parseInt(p.style.left) === left && parseInt(p.style.top) === top) {
          // Change the color of the previously occupied pixel
          p.style.backgroundColor = getRandomColor();
          break;
        }
      }

      // Update the pixel's position
      pixel.style.left = left + "px";
      pixel.style.top = top + "px";
    }

    function getRandomColor() {
      var letters = "0123456789ABCDEF";
      var color = "#";
      for (var i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
      }
      return color;
    }

    function initialize() {
      var canvas = document.getElementById("canvas");
      canvasWidth = canvas.clientWidth;
      canvasHeight = canvas.clientHeight;

      // Create the pixel
      var pixel = createPixel();

      // Move each pixel in the array every 0.01 seconds
      setInterval(function() {
        for (var i = 0; i < pixels.length; i++) {
          movePixel(pixels[i]);
        }
      }, 10);
    }
  </script>
</head>
<body onload="initialize()">
  <div id="canvas"></div>
</body>
</html>
